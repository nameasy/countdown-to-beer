Vue.createApp({data:()=>({SECOND:1e3,MINUTE:6e4,HOUR:36e5,DAY:864e5,time:null,interval:null,days:"",hours:"",minutes:"",seconds:"",started:!1,selectedDate:"",selectedTime:""}),mounted(){let t=localStorage.getItem("selectedDateTime");if(t){this.started=!0,this.time=parseInt(t);let e=new Date(this.time);this.selectedDate=e.toISOString().split("T")[0],this.selectedTime=e.toTimeString().split(" ")[0],this.startCountdown()}},methods:{copyUrl(){let t=window.location.href;navigator.clipboard.writeText(t).then(()=>{this.copied=!0,setTimeout(()=>{this.copied=!1},2e3)})},declineNouns(t,[e,i,s]){let a=Math.abs(t)%100%10;return 1===a&&11!==t?e:a>1&&a<5&&(t<10||t>20)?i:s},getCurrentTime:()=>new Date().getTime(),getTimeDifference(t){return t-this.getCurrentTime()},formatTimeUnit:t=>Math.floor(t).toString().padStart(2,"0"),updateDays(t){let e=Math.floor(t/this.DAY);this.days=`${this.formatTimeUnit(e)} ${this.declineNouns(this.formatTimeUnit(e),["день","дня","дней"])}`},updateHours(t){let e=Math.floor(t%this.DAY/this.HOUR);this.hours=`${this.formatTimeUnit(e)} ${this.declineNouns(this.formatTimeUnit(e),["час","часа","часов"])}`},updateMinutes(t){let e=Math.floor(t%this.HOUR/this.MINUTE);this.minutes=`${this.formatTimeUnit(e)} ${this.declineNouns(this.formatTimeUnit(e),["минуту","минуты","минут"])}`},updateSeconds(t){let e=Math.floor(t%this.MINUTE/this.SECOND);this.seconds=`${this.formatTimeUnit(e)} ${this.declineNouns(this.formatTimeUnit(e),["секунду","секунды","секунд"])}`},updateTimer(t){this.updateDays(t),this.updateHours(t),this.updateMinutes(t),this.updateSeconds(t)},startCountdown(){let t=new Date(`${this.selectedDate} ${this.selectedTime}`).getTime();if(isNaN(t)){alert("Invalid date and time");return}this.time=t,this.updateLocalStorage();let e=new URLSearchParams(window.location.search);e.set("datetime",t);let i=`${window.location.pathname}?${e.toString()}`;history.pushState(null,"",i),this.started=!0,this.countdownTimer()},countdownTimer(){this.interval=setInterval(()=>{let t=this.getTimeDifference(this.time);t<=0?(clearInterval(this.interval),document.querySelector(".countdown__text").innerText="Пора пить пиво!"):this.updateTimer(t)},this.SECOND)},updateLocalStorage(){localStorage.setItem("selectedDateTime",this.time.toString())},resetCountdown(){localStorage.removeItem("selectedDateTime");let t=new URLSearchParams(window.location.search);t.delete("datetime");let e=`${window.location.pathname}?${t.toString()}`;history.pushState(null,"",e),this.started=!1,this.time=null,this.days="",this.hours="",this.minutes="",this.seconds="",this.selectedDate="",this.selectedTime=""}},beforeDestroy(){clearInterval(this.interval)}}).mount("#app");